# alexa going out script
alexa_going_out:
  alias: "Going Out"
  sequence:
    - service: input_select.select_option
      data:
        entity_id: input_select.presence
        option: "Away"

# pre-warm bedroom script
pre_warm:
  alias: Pre-warm
  description: Pre-warm bedroom before bed and at morning
  mode: parallel
  fields:
    room:
      description: "Room for climate device for bedroom"
      example: master_bedroom
  sequence:
    # activate cliamte react
    - service: switch.turn_on
      data_template:
        entity_id: "switch.{{ room }}_ac_climate_react"
    # continue if temprature is below pre-warm threshold
    - condition: template 
      value_template: "{{ ( state_attr('climate.' + room, 'current_temperature') < states('input_number.prewarm_threshold') | int ) }}"
    # activate heat for one and a half hours
    - service: climate.set_hvac_mode
      data_template:
        entity_id: "climate.{{ room }}"
        hvac_mode: heat
    - service: climate.set_temperature
      data_template: 
        entity_id: "cliamte.{{ room }}"
        temperature: "{{ states('input_number.prewarm_temperature') }}"
    - delay: "01:30"
    # deactivate heat
    - service: climate.set_hvac_mode
      data_template: 
        entity_id: "cliamte.{{ room }}"
        hvac_mode: "off"

# wake up script
wake_up:
  alias: Wake Up
  description: Pre-Alarm Wake Up Routine
  mode: parallel
  fields:
    warmer:
      description: "Towel warmer for Bedroom"
      example: "guest_bath_towel_warmer"
  sequence:
    # activate towel warmer
    - service: switch.turn_on
      data_template:
        entity_id: "switch.{{ warmer }}"
    # activate common area AC climate react
    - service: switch.turn_on
      entity_id: switch.living_room_ac_climate_react
    - service: switch.turn_on
      entity_id: switch.den_ac_climate_react
    # wait two hours
    - delay: "02:00:00"
    # switch off towel warmer
    - service: switch.turn_off
      data_template:
        entity_id: "switch.{{ warmer }}"

# Good Night Script
good_night:
  alias: Good Night
  description: Turn everything off for bed
  sequence:
    # turm off lights
    - service: light.turn_off
      entity_id:
        - light.den_lights
        - light.vestibule_switch
        - light.bedroom_lamp
        - light.under_stoop_lights
        - light.living_room
        - light.laundry_room
        - light.office
        - light.guest_room
        - light.master_bedroom
        - light.kitchen
    # turn off towel warmer
    - service: switch.turn_off
      entity_id: switch.master_bath_towel_warmer
    # turn off TV
    - service: remote.turn_off
      entity_id: remote.living_room_2
    # turn off split units in Den and Living Room
    - service: climate.turn_off
      entity_id:
        - climate.den_thermostat
        - climate.den
        - climate.living_room
        - climate.living_room_thermostat
    # turn off climate react
    - service: switch.turn_off
      entity_id:
        - switch.den_ac_climate_react
        - switch.living_room_ac_climate_react
